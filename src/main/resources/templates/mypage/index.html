<!DOCTYP html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorator="layout">
<head>
  <meta th:remove="all" charset="utf-8"/>
  <title>会員情報</title>
</head>
<body>
<div layout:fragment="content">
  <section>
    <form th:action="@{/logout}" method="post">
      <input type="submit" value="ログアウト" class="btn btn-default"/>
    </form>
  </section>
  <h2>会員情報</h2>

  <h3>参加者情報</h3>
  <section>
    <p th:each="member: ${members}">
    <table class="table table-bordered">
      <colgroup>
        <col class="col-xs-2">
        <col class="col-xs-5">
        <col class="col-xs-1">
      </colgroup>
      <tbody>
      <tr>
        <th scope="row">顔写真</th>
        <td>
          <img th:with="srcUrl=(${member.photo} ? ${member.photo.photoUrl} : '/images/nophoto.png')"
               th:src="@{|${srcUrl}|}"
               src="/images/nophoto.png"
               alt="member's photo" class="img-thumbnail">
        </td>
        <td>
          <a class="btn btn-default" th:href="@{|/mypage/member/${member.memberNo}/photo|}">
            <span class="glyphicon glyphicon-camera" aria-hidden="true"></span>
          </a>
        </td>
      </tr>

      <tr>
        <th scope="row">会員番号</th>
        <td th:text="${member.memberNo}">
          0000000
        </td>
        <td rowspan="4">
          <a class="btn btn-default disabled" href="#"
             th:href="@{|/mypage/member/${member.memberNo}/edit|}">
            <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
          </a>
        </td>
      </tr>
      <tr>
        <th scope="row">氏名</th>
        <td>
          <ruby th:inline="text">
            [[${member.familyName}]]
            <rp>(</rp>
            <rt th:text="${member.familyNameKana}"></rt>
            <rp>)</rp>
          </ruby>
          <ruby th:inline="text">
            [[${member.givenName}]]
            <rp>(</rp>
            <rt th:text="${member.givenNameKana}"></rt>
            <rp>)</rp>
          </ruby>
        </td>
      </tr>
      <tr>
        <th scope="row">学年</th>
        <td th:text="${member.grade.label}"></td>
      </tr>
      <tr>
        <th scope="row">性別</th>
        <td th:text="${member.gender.label}">男</td>
      </tr>
      <tr>
        <th scope="row">留意事項</th>
        <td>
          <small th:text="${member.hasActivityNotice()} ? '設定あり' : 'なし'"></small>
        </td>
        <td>
          <a class="btn btn-default" href="#"
             th:href="@{|/mypage/member/${member.memberNo}/activityNotice|}">
            <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
          </a>
        </td>
      </tr>
      <tr>
        <th scope="row">連絡</th>
        <td colspan="2">
          <button class="btn btn-success">出欠・遅刻・早退等の連絡</button>
        </td>
      </tr>
      </tbody>
    </table>
    </p>
    <p>
      <a class="btn btn-success btn-block" th:href="@{/mypage/member/new}">
        <span class="glyphicon glyphicon-user" aria-hidden="true"></span>
      <span class="glyphicon glyphicon-plus" aria-hidden="true">
        参加者追加</span>
      </a>

    </p>
  </section>
  <h3>保護者情報</h3>
  <section>
    <table class="table table-bordered">
      <colgroup>
        <col class="col-xs-2">
        <col class="col-xs-5">
        <col class="col-xs-1">
      </colgroup>
      <tbody>
      <tr>
        <th scope="row">氏名</th>
        <td>
          <ruby th:inline="text">
            [[${parent.familyName}]]
            <rp>(</rp>
            <rt th:text="${parent.familyNameKana}"></rt>
            <rp>)</rp>
          </ruby>
          <ruby th:inline="text">
            [[${parent.givenName}]]
            <rp>(</rp>
            <rt th:text="${parent.givenNameKana}"></rt>
            <rp>)</rp>
          </ruby>
        </td>
        <td rowspan="3">
          <a class="btn btn-default" href="editContacts.html"
             th:href='@{|/mypage/contact/|}'>
            <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
          </a>
        </td>
      </tr>
      <tr>
        <th scope="row">電話番号</th>
        <td>
          <table>
            <tbody>
            <tr>
              <th scope="row"><span class="label label-default">1</span></th>
              <td class="ellipsis" th:text="${parent.phoneNumber1}">012-3456-7890</td>
            </tr>
            <tr>
              <th scope="row"><span class="label label-default">2</span></th>
              <td class="ellipsis" th:text="${parent.phoneNumber2 ?: '登録なし' }">012-3456-7890</td>
            </tr>
            </tbody>
          </table>
        </td>
      </tr>
      <tr>
        <th scope="row">アドレス</th>
        <td>
          <table class="table table-condensed">
            <tbody>
            <!--/*/ <th:block th:each="contact: ${contacts}">  /*/-->
            <tr>
              <td rowspan="2"><span class="badge" th:text="${contactStat.index}+1"></span></td>
              <td>
                <div class="input-group small"
                     th:switch="${#objects.nullSafe(contact.status, 'null').toString()}">
                  <span th:case="'AddressConfirmed'" class="input-group-addon success">
                    <span class="glyphicon glyphicon-ok-sign" aria-hidden="true"></span>
                  </span>
                  <span th:case="'AddressError'" class="input-group-addon warning">
                    <span class="glyphicon glyphicon-warning-sign" aria-hidden="true"></span>
                  </span>
                  <span th:case="*" class="input-group-addon info">
                    <span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span>
                  </span>

                  <input type="email" class="form-control"
                         th:value="${contact.emailAddress}" readonly>
                </div>
              </td>
            </tr>
            <tr>
              <td>
                <label class="checkbox-inline small"><input disabled type="checkbox"
                                                            th:checked="${contact.receiveApplyNotification}"
                                                            th:id="'recvApplyNotif' + ${contactStat.index}">
                  申込み内容の確認メールを受け取る</label>
                <label class="checkbox-inline small"><input disabled type="checkbox"
                                                            th:checked="${contact.receiveActivitySchedule}"
                                                            id="'recvEventNotif' + ${contactStat.index}">活動の開催通知を受け取る</label>
              </td>
            </tr>
            <!--/*/ </th:block> /*/-->
            </tbody>
          </table>
        </td>
      </tr>
      </tbody>
    </table>
  </section>
</div>
</body>
</html>